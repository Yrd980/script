pcstat - get page cache statistics for files A common question when tuning databases and other IO-intensive applications is, "is Linux caching my data or not?" pcstat gets that information for you using the mincore2 syscall. The fincore application from linux-ftools does the same thing and I read its source code. I chose not to use it because it appears to be abandoned and has some build problems. I wrote this is so that Apache Cassandra users can see if ssTables are being cached. If $GOPATH/bin is in your PATH, this will get it installed: go install github.com/tobert/pcstat@latest pcstat /var/lib/cassandra/data///-Data.db If you don't want to mess around with building the software, binaries are provided in orphaned branches so you can pull them down from Github with curl/wget. if $uname -m == "x8664" ; then curl -L -o pcstat https://github.com/tobert/pcstat/raw/2014-05-02-01/pcstat.x8664 else curl -L -o pcstat https://github.com/tobert/pcstat/raw/2014-05-02-01/pcstat.x8632 fi chmod 755 pcstat ./pcstat /var/lib/cassandra/data///-Data.db Usage Command-line arguments are described below. Every argument following the program flags is considered a file for inspection. Examples Default output The default output is designed to be easy for humans to read at a glance and should look nice in any fixed-width font. Terse output Meant to be machine readable and easy to process with standard shell tools and scripts. Note: No attempt is made to escape characters for proper CSV at this time. JSON output The 'status' field will always be empty unless you add the -pps flag, which will cause status to be populated with an array of booleans, one per page in the file indicated whether it's cached or not. This can get spammy with big files so it's off by default. Histogram output Your terminal and font need to support the Block Elements section of Unicode for this to work. Even then, the output is inconsistent in my testing, so YMMV. See http://www.unicode.org/charts/PDF/U2580.pdf The number after the filename is the number of pages in the file. This might be removed in the future. Testing The easiest way to tell if this tool is working is to drop caches and do reads on files to get things into cache. Building git clone https://github.com/tobert/pcstat.git cd pcstat go build sudo cp -a pcstat /usr/local/bin pcstat /usr/local/bin/pcstat Requirements Go 1.17 or higher. From the mincore2 man page: Available since Linux 2.3.99pre1 and glibc 2.2. mincore is not specified in POSIX.1-2001, and it is not available on all UNIX implementations. Before kernel 2.6.21, mincore did not return correct information some mappings. Author A. Tobey <tobert@gmail.com> @renice@hachyderm.io License Apache 2.0